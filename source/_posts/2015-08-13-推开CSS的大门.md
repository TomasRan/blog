title: 推开CSS的大门
categories:
  - CSS
tags:
  - css
  - css继承
  - css层叠
  - css优先级
abbrlink: G8168ECoJD-xBiKwCXJB5Q
date: 2015-08-13 17:54:23
---

## 从百家争鸣到独领风骚
CSS是 Cascading Style Sheets 的缩写，中文译为层叠样式表。

先浅浅挖掘一下CSS的诞生历史吧，毕竟每一项技术的问世都不太可能像孙悟空一样从石头里赤裸裸地蹦出来。追根溯源，融会贯通，发扬光大。成熟的技术总是需要有人去承上启下。

早在90年代初HTML诞生之后，不同的样式语言也应运而生，不同的浏览器根据自身特点私人定制属于自己的样式语法，自然造成了去雄逐鹿的混乱局面。style默默等待着一个统一世界的乱世英雄。

<!-- more -->

而随着HTML的不断发展，一些鄙陋的样式语言也越来越满足不了设计师的需求。彼时，就有人提出了大一统的思想。1994年哈坤·利在芝加哥的一次会议上第一次提出了CSS的构想，后来与伯特·波斯（当时正在设计一个叫做Argo的浏览器）一起，再一次提出了这个构思。在中国的封建社会，多是某英雄振臂一呼，然后就掀起了一股抵制暴力、武装反抗统治阶级的腥风血雨。他们的努力，同样引起了计算机江湖的波涛汹涌，为他们今后稳稳占住样式语言门派的大佬的地位奠定了基础。在这里就要引入一个很值得业界钦佩的组织了，就是江湖上众口称赞的W3C组织，这个非盈利性质的标准化组织在彼时也是初出茅庐，江湖地位还有待巩固，他们对上面二人提出的CSS构思产生了浓厚的兴趣，并为此组织了一次讨论会，成立了专项项目组开始了CSS的开发，负责人自然是以上二位。至1996年底，CSS的第一版正式发布了。至此，冗长的挖祖坟的言论也就结束了。这样的历史，我是没有办法亲自去验证，因此也是道听途说罢了。历史话题本来就是充满争议的，所以我们需要带着自己的思考去选择性接受，更甚者可以大胆自己推测。在信息化爆炸、网络文明还未建立健全的现在，自身具备良好的网络行为习惯和获取新知的批判思维还是极其重要的。

更加详实的CSS发展历史？请参看 [这里](https://en.wikipedia.org/wiki/Cascading_Style_Sheets)。

## CSS作用

CSS定义了网页内容显示的外观，告诉浏览器应该如何去展示一个html元素。
html的关注点原本应该是在定义网页的内容上，但毕竟人要衣装，佛要金装，光有内涵还不足以满足广大人民群众高大上、小清新、blink的需求，我想一团乱糟糟，摩肩擦踵的文字应该不会带来治愈的感觉吧，正因为如此，样式被召唤出来。不过样式的介入，使得创建独立于表现层的html代码就比较困难，会使得html的代码看起来杂乱冗长，缺乏层次，难以维护，想想看要为一个页面的所有div都重复添加相同的属性是不是一件让人很厌烦的事情呢？而CSS解决了这一问题，使得网页的内容和表现独立开来，各司其职，有条不紊，提高了 开发效率、代码的可维护性和扩展性。

## CSS继承机制

谈到CSS继承机制，我们不妨先粗糙地了解一下DOM树的结构。

![DOM树](http://img.blog.csdn.net/20150728103744320)

```
<html>
	<head>
    	<title>dom树</title>
 	</head>
   	<body>
    	<ul>
  			<li></li>
  			<li></li>
  			<li></li>
  		</ul>
  	</body>
</html>;
```

上面的DOM树对应了后面的这段html代码，层次结构很清晰，标签html是所有元素的祖先元素，也可以说是根节点。header、body、footer是兄弟节点。我们拿body元素来说：body是html的子元素，而是ul的父元素，父子关系是相对的，以现实做对照，我想这应该是不难理解的。

接下来，让我们看看，对于DOM树这种结构，CSS应用了什么样的规则。根据W3C所规定：CSS继承是指子元素会继承父级元素所拥有的属性。也就是说，父级元素定义的属性对子元素同样起到作用。那么，我们可以想到以下几个问题：

1. 所有的CSS属性都是可以继承的吗
然并不是。首先，CSS中并不是所有的属性都可以被继承；其次，不同类的html元素对相同的CSS属性的继承是有不同表现的。接下来我们来看看CSS中可以被继承和不可以被继承的属性：

	```
  所有元素不可继承的属性:display, margin, border, padding, background, height, min-height, max-height, width, min-width, max-width, overflow, position, left, right, top, bottom, z-index, float, clear, table-layout, vertical-align, page-break-after, page-break-before...
  所有元素可继承的属性: visibility, cursor...
  内联元素可继承的属性: letter-spacing, word-spacing, white-space, line-height, color, font, font-family, font-size, font-style, font-variant, font-weight, text-decoration, text-transform, direction...
  块级元素可继承的属性: text-indent, text-align...
  列表元素可继承的属性: list-style, list-style-type, list-style-position, list-style-image...
  表格元素可继承的属性: border-collapse...
	```
  纸上得来终觉浅，绝知此事要躬行。大家还是应该自己去实践一下亲自做个验证才是。

2. 孙子可以继承爷爷的属性吗?
可以。这是满足传递性的。爷爷和爸爸是父子关系，按照CSS继承规则，爸爸继承了爷爷属性，而爸爸和孙子也是父子关系，因此孙子继承了爸爸的属性，也就继承了爷爷的属性。
3.    如果父元素和子元素都对同一属性进行了定义，那么对于子元素来说，最终选择谁定义的属性来呈现呢？
按照CSS层叠机为了弄清楚这个问题，下面就要谈一谈CSS中的层叠机制了。

## CSS层叠机制

样式表允许采用多种方式规定html元素的显示样式，不仅可以在不同的地方对同一html元素进行样式的定义，并且父元素的样式定义还会影响到子元素的呈现。这将分为两个方面：

1. 对同一html元素不同属性的定义，取并集：
怎么去理解呢？举例的作用就是尽量将抽象的概念转化为形象的描述。内功毕竟是看不出来的，小试牛刀往往可以见微知著。那么我们来看看下面这个例子：

	```
	<div style="text-align:center;">
    	<p style="color:red;">Just a joke</p>
	</div>
	```

	解释一下，首先给外层div标签设置了一个文本居中的属性，然后给div的子元素（也就	是p标签）  设置了字体为红色的属性，我们得到的结果是这样的：

	![推开CSS的大门](http://img.blog.csdn.net/20150803233606213)

	黑色边框是外层div，而红色字体部分正是内层标签p的文本内容，从这里我们可以看	到，内层标签p的文本内容不仅呈现了自身红色字体的属性定义，也呈现了从外层div标	签继承而来的居中属性。
	因此，如果是对同一html元素的不同属性定义，这些不同属性都会有效作用于该元素。

2. 对同一html元素相同属性的定义上，根据优先级决定取舍：</strong>
这一点是CSS层叠机制的核心。我们经常会在不同的地方对同一html元素的某一属性进行了重复的定义，比如某块级元素定义了文本居中的属性，而它的子块级元素定义了文本居左的属性，定义的都是同一个属性，但是属性值不一样，这时候它的子块级元素文本究竟是该居左还是居中呢？根绝CSS的层叠机制，不同地方的样式定义具有不同的优先级，在最终的选择上，元素会呈现优先级高的样式定义所赋予的值。CSS样式优先级（数字4拥有最高的优先权）：

	1. 浏览器缺省设置<br>
	浏览器自身对样式有默认设置，比如默认字体16px，当你没有明确设置字体大小的时	候，浏览器就采用16px的大小设置网页字体。
	2. 外部样式表<br>
	外部样式表就是我们最常用到的.css等样式文件
	3. 内部样式表<br>
	位于<head>标签内部的样式表</li>
	4. 内联样式表<br/>
	在html标签内部的样式，通常是在style="..."
	CSS属性设置按照这个优先级顺序实现最后的层叠呈现。这即是CSS的层叠机制。

##浏览器兼容性

CSS3正在兴起，在推陈出新的阶段，我们在使用CSS属性的时候，必然要考虑的就是在各个浏览器的兼容性问题，至于采用“优雅降级”还是“渐进增强”交给开发者自己把握，如果知道各个CSS属性在各大主流浏览器的兼容性状况，除了查看W3C CSS教程之外，推荐一个在线网站 [Can I Use](http://caniuse.com/)。这个网站可以查看html5、css等标签和属性在浏览器的兼容性状况，值得拥有。

进一步学习可参见 <a href="http://www.w3school.com.cn/css/">W3C CSS教程</a>。
